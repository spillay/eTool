<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
    	xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets"
    	xmlns:p="http://primefaces.org/ui">
<h:head>
     <title>Permit Enquiry</title>
</h:head>
<p:layout fullPage="true">
	<p:layoutUnit position="west" size="200" header="e-Permit" resizable="true"
		closable="true" collapsible="true">
		<h:form id="menuForm">
			<p:menu type="sliding">
				<p:submenu label="Citizen View">
					<p:menuitem value="New Application" url="./PermitApp.xhtml"/>
					<p:menuitem value="Application" url="./PermitApp2.xhtml"
						 />
					<p:menuitem value="Enquiry" url="./ClientEnquiry.xhtml"/>
				</p:submenu>
				<p:submenu label="Department View">
					<p:menuitem value="Manage Permit" url="./DeptView.xhtml" icon="ui-icon ui-icon-home" />
				</p:submenu>
			</p:menu>
		</h:form>
	</p:layoutUnit>
	<p:layoutUnit position="center" size="100" minSize="40" maxSize="200">

<h:form><p:panel header="Permit Enquiry"><p:panel header="Client">
<p:panelGrid columns="2" cellpadding="4">
<h:outputText value="Identity Number"></h:outputText>
<p:inputMask mask="9-9-9-9-9-9-9-9-9-9-9-9-9" value="#{clientEnquiryBean.client.idno}" required="true" requiredMessage="Valid Green Barcode ID is Required"></p:inputMask>
<p:growl id="growl" life="2000" />
<p:commandButton value="search" id="ajax" update="growl,PermitTable" actionListener="#{clientEnquiryBean.searchAction}"  styleClass="ui-priority-primary" />

</p:panelGrid>
</p:panel>

<p:dataTable id="PermitTable" var="permit" value="#{clientEnquiryBean.permits}">
<p:column headerText="Permit Number"><h:outputText value="#{permit.permitNo}"/></p:column>
<p:column headerText="Permit Status"><h:outputText value="#{permit.permitstatus.status}"/></p:column>
<p:column headerText="Permit Type"><h:outputText value="#{permit.permittype.name}"/></p:column>
<p:column headerText="Date Issued"><h:outputText value="#{permit.dateIssued}"/></p:column>
<p:column headerText="Date Valid From"><h:outputText value="#{permit.dteValidFrom}"/></p:column>
<p:column headerText="Date Valid To"><h:outputText value="#{permit.dteValidTo}"/></p:column>
</p:dataTable>


</p:panel>
<p:commandButton value="Done" id="doneBtn"  immediate="true" validateClient="false" action="./PermitApp.xhtml?faces-redirect=true"/>
</h:form>
</p:layoutUnit>
</p:layout>
</html>
